<div class="container">

	<div class="form-photo-edit">

		<h2 class="photo-edit-name">Edit Photo</h2>

		<%= form_with model: @photo, local: true do |f| %>

			<div class="field-photo-edit">
				<div class="row">

					<div class="col-md-5">
						<div class="field-photo-edit-image">
							<%= attachment_image_tag @photo, :image, id: "photo-edit-image", class: "field-photo-edit-image-show", format: 'jpeg' %>
							<%= f.label :image, class: "btn field-photo-edit-image-btn" %>
							<%= f.attachment_field :image, class: "field-photo-edit-image-hide" %>
						</div>
					</div>

					<div class="col-md-7">
						<div class="field-photo-edit-text">
							<%= f.label :text %> <br>
							<%= f.text_area :text, rows: "5", placeholder: "テキストの入力…" %>
						</div>
						<div class="field-photo-edit-tag">
							<%= f.label :tag_list, "Tag" %> <br>
							<%= f.text_field :tag_list, placeholder: "e.g.) 海, 山, 夜景", value: @photo.tag_list.join(',') %>
						</div>
						<div class="actions-photo-edit">
							<%= f.submit 'Update', class: "btn actions-photo-edit-update" %>
						</div>
					</div>

				</div>
			</div>

		<% end %>

	</div>

</div>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>

<script>

	$('#photo_image').on('change', function (e) {
	    var reader = new FileReader();
	    reader.onload = function (e) {
	        $("#photo-edit-image").attr('src', e.target.result);
	    }
	    reader.readAsDataURL(e.target.files[0]);
	});

</script>